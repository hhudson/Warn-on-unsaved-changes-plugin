prompt --application/set_environment
set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_200200 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2020.10.01'
,p_release=>'20.2.0.00.20'
,p_default_workspace_id=>9690978936188613
,p_default_application_id=>111
,p_default_id_offset=>0
,p_default_owner=>'ILA'
);
end;
/
 
prompt APPLICATION 111 - plugin for warn on unsaved changes
--
-- Application Export:
--   Application:     111
--   Name:            plugin for warn on unsaved changes
--   Date and Time:   22:31 Thursday April 15, 2021
--   Exported By:     HAYDEN
--   Flashback:       0
--   Export Type:     Component Export
--   Manifest
--     PLUGIN: 23923801858657884
--   Manifest End
--   Version:         20.2.0.00.20
--   Instance ID:     9590637774721077
--

begin
  -- replace components
  wwv_flow_api.g_mode := 'REPLACE';
end;
/
prompt --application/shared_components/plugins/dynamic_action/io_2122_warn_on_unsaved_changes
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(23923801858657884)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'IO.2122.WARN_ON_UNSAVED_CHANGES'
,p_display_name=>'Warn on Unsaved Changes Enhancement'
,p_category=>'INIT'
,p_supported_ui_types=>'DESKTOP'
,p_javascript_file_urls=>'#PLUGIN_FILES#js/apex-detect-changed-items.min.js'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'function render ',
'  ( p_dynamic_action in apex_plugin.t_dynamic_action',
'  , p_plugin         in apex_plugin.t_plugin ',
'  )',
'return apex_plugin.t_dynamic_action_render_result',
'as',
'    l_result                  apex_plugin.t_dynamic_action_render_result;',
'    l_operate_on_modals       p_dynamic_action.attribute_01%type := p_dynamic_action.attribute_01;',
'    l_warn_on_unsaved_changes varchar2(3) := ''No'';',
'',
'begin',
'    ',
'    --debug',
'    if apex_application.g_debug ',
'    then',
'        apex_plugin_util.debug_dynamic_action',
'          ( p_plugin         => p_plugin',
'          , p_dynamic_action => p_dynamic_action',
'          );',
'    end if;',
'',
'    apex_json.initialize_clob_output;',
'    ',
'    select case when page_mode = ''Normal'' ',
'                then warn_on_unsaved_changes',
'                when l_operate_on_modals = ''Y''',
'                then ''Yes''',
'                else ''No''',
'                end warn_yn',
'        into l_warn_on_unsaved_changes',
'        from apex_application_pages',
'        where application_id = :APP_ID ',
'        and page_id = :APP_PAGE_ID;',
'',
'    if l_warn_on_unsaved_changes =  ''Yes'' then',
'        l_result.javascript_function := ''function(){window.onbeforeunload = confirmExit;}'';',
'    else ',
'         l_result.javascript_function := ''function(){}'';',
'    end if;',
'    ',
'    ',
'    apex_json.free_output;',
'',
'    return l_result;',
'end render;'))
,p_api_version=>2
,p_render_function=>'render'
,p_standard_attributes=>'ONLOAD'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_help_text=>'Plugin enhances the default "Warn on Unsaved Changes" UX by providing item-level callouts for the items that are triggering the "warn on unsaved changes". Read more here : https://github.com/hhudson/Warn-on-unsaved-changes-plugin'
,p_version_identifier=>'1.0'
,p_about_url=>'https://github.com/hhudson/Warn-on-unsaved-changes-plugin'
,p_files_version=>65
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(24636802581560933)
,p_plugin_id=>wwv_flow_api.id(23923801858657884)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Operate on Modal Pages'
,p_attribute_type=>'CHECKBOX'
,p_is_required=>false
,p_default_value=>'N'
,p_is_translatable=>false
,p_help_text=>'Identify if you want the functionality to operate on ''Modal'' Pages in addition to ''Normal'' pages.'
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '2F2F77696E646F772E6F6E6265666F7265756E6C6F6164203D20636F6E6669726D457869743B0A2F2A205468652062656C6F772077696C6C206E6F742072756E20756E6C657373207468652061626F766520697320756E636F6D6D656E7465642E0A202A';
wwv_flow_api.g_varchar2_table(2) := '20546865207265636F6D6D656E646174696F6E20697320746F2072756E207468652061626F766520636F6D6D616E6420696E20610A202A2064796E616D696320616374696F6E206F6E2070616765206C6F6164206F662050616765203020776974682074';
wwv_flow_api.g_varchar2_table(3) := '6865205365727665720A202A205369646520436F6E646974696F6E206F662027526F77732072657475726E65642720666F722074686520666F6C6C6F77696E672071756572793A0A202A2073656C65637420310A202A20202066726F6D20617065785F61';
wwv_flow_api.g_varchar2_table(4) := '70706C69636174696F6E5F70616765730A202A2020207768657265206170706C69636174696F6E5F6964203D203A4150505F49440A202A202020616E6420706167655F6964203D203A4150505F504147455F49440A202A202020616E64207761726E5F6F';
wwv_flow_api.g_varchar2_table(5) := '6E5F756E73617665645F6368616E676573203D2027596573270A202A20546869732077696C6C20686176652074686520726573756C74207468617420746865207761726E696E672077696C6C20726573706563742074686520706167650A202A206C6576';
wwv_flow_api.g_varchar2_table(6) := '656C206174747269627574652073657474696E6720666F7220275761726E206F6E20556E7361766564204368616E676573270A202A2F0A0A76617220627574746F6E446F4E6F745761726E203D2066616C73653B0A0A66756E6374696F6E207761726E4F';
wwv_flow_api.g_varchar2_table(7) := '6E4974656D4C6576656C2829207B0A2020766172206572726F7273203D205B5D3B0A0A2020616C6C4974656D73203D20617065782E706167652E666F7245616368506167654974656D3B0A2020616C6C4974656D73280A2020202024282223777776466C';
wwv_flow_api.g_varchar2_table(8) := '6F77466F726D22292C0A2020202066756E6374696F6E2028656C2C206E616D6529207B0A202020202020696620280A2020202020202020617065782E6974656D286E616D65292E69734368616E67656428292026260A202020202020202021617065782E';
wwv_flow_api.g_varchar2_table(9) := '6974656D286E616D65292E656C656D656E745B305D2E636C6173734C6973742E76616C75652E696E636C7564657328226A732D69676E6F72654368616E676522290A20202020202029207B0A20202020202020206572726F72732E70757368287B0A2020';
wwv_flow_api.g_varchar2_table(10) := '20202020202020206D6573736167653A202254686973206974656D2068617320756E7361766564206368616E676573222C202F2F636F6E7369646572207573696E67206120737562737469747574696F6E0A202020202020202020206C6F636174696F6E';
wwv_flow_api.g_varchar2_table(11) := '3A2022696E6C696E65222C0A20202020202020202020706167654974656D3A206E616D652C0A20202020202020207D293B0A2020202020207D0A202020207D2C0A20202020747275650A2020293B0A0A2020617065782E6D6573736167652E636C656172';
wwv_flow_api.g_varchar2_table(12) := '4572726F727328293B0A2020617065782E6D6573736167652E73686F774572726F7273286572726F7273293B0A7D0A0A66756E6374696F6E20636F6E6669726D457869742829207B0A2020766172207061676552657175657374203D2022726571756573';
wwv_flow_api.g_varchar2_table(13) := '7422202B2024762822705265717565737422293B0A202069662028617065782E706167652E69734368616E6765642829202626207061676552657175657374203D3D202272657175657374222026262021627574746F6E446F4E6F745761726E29207B0A';
wwv_flow_api.g_varchar2_table(14) := '202020207761726E4F6E4974656D4C6576656C28293B0A202020207061676552657175657374203D206E756C6C3B0A2020202077696E646F772E627574746F6E446F4E6F745761726E203D2066616C73653B0A2020202072657475726E2022223B202F2F';
wwv_flow_api.g_varchar2_table(15) := '77696C6C206E6F742061637475616C6C792062652073686F776E0A20207D20656C7365207B0A202020207061676552657175657374203D206E756C6C3B0A2020202077696E646F772E627574746F6E446F4E6F745761726E203D2066616C73653B0A2020';
wwv_flow_api.g_varchar2_table(16) := '7D0A7D0A0A617065782E6A517565727928646F63756D656E74292E72656164792866756E6374696F6E2829207B0A0A2020202428275B747970653D627574746F6E5D27292E656163682866756E6374696F6E2829207B0A20202020202020696620287468';
wwv_flow_api.g_varchar2_table(17) := '69732E636C6173734C6973742E76616C75652E696E636C7564657328226A732D69676E6F72654368616E67652229297B0A202020202020202020202024282223222B746869732E6964292E636C69636B2866756E6374696F6E28297B200A202020202020';
wwv_flow_api.g_varchar2_table(18) := '202020202020202020202020202020202020202020202020202020202020202020202020202077696E646F772E627574746F6E446F4E6F745761726E203D20747275653B200A202020202020202020202020202020202020202020202020202020202020';
wwv_flow_api.g_varchar2_table(19) := '2020202020202020202020207D0A20202020202020202020202020202020202020202020202020202020202020293B0A202020202020207D0A2020207D293B0A7D293B0A0A';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(23924530982664770)
,p_plugin_id=>wwv_flow_api.id(23923801858657884)
,p_file_name=>'js/apex-detect-changed-items.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '76617220627574746F6E446F4E6F745761726E3D21313B66756E6374696F6E207761726E4F6E4974656D4C6576656C28297B76617220653D5B5D3B616C6C4974656D733D617065782E706167652E666F7245616368506167654974656D2C616C6C497465';
wwv_flow_api.g_varchar2_table(2) := '6D732824282223777776466C6F77466F726D22292C2866756E6374696F6E286E2C74297B617065782E6974656D2874292E69734368616E6765642829262621617065782E6974656D2874292E656C656D656E745B305D2E636C6173734C6973742E76616C';
wwv_flow_api.g_varchar2_table(3) := '75652E696E636C7564657328226A732D69676E6F72654368616E676522292626652E70757368287B6D6573736167653A2254686973206974656D2068617320756E7361766564206368616E676573222C6C6F636174696F6E3A22696E6C696E65222C7061';
wwv_flow_api.g_varchar2_table(4) := '67654974656D3A747D297D292C2130292C617065782E6D6573736167652E636C6561724572726F727328292C617065782E6D6573736167652E73686F774572726F72732865297D66756E6374696F6E20636F6E6669726D4578697428297B76617220653D';
wwv_flow_api.g_varchar2_table(5) := '2272657175657374222B24762822705265717565737422293B696628617065782E706167652E69734368616E676564282926262272657175657374223D3D65262621627574746F6E446F4E6F745761726E2972657475726E207761726E4F6E4974656D4C';
wwv_flow_api.g_varchar2_table(6) := '6576656C28292C653D6E756C6C2C77696E646F772E627574746F6E446F4E6F745761726E3D21312C22223B653D6E756C6C2C77696E646F772E627574746F6E446F4E6F745761726E3D21317D617065782E6A517565727928646F63756D656E74292E7265';
wwv_flow_api.g_varchar2_table(7) := '616479282866756E6374696F6E28297B2428225B747970653D627574746F6E5D22292E65616368282866756E6374696F6E28297B746869732E636C6173734C6973742E76616C75652E696E636C7564657328226A732D69676E6F72654368616E67652229';
wwv_flow_api.g_varchar2_table(8) := '262624282223222B746869732E6964292E636C69636B282866756E6374696F6E28297B77696E646F772E627574746F6E446F4E6F745761726E3D21307D29297D29297D29293B0A2F2F2320736F757263654D617070696E6755524C3D617065782D646574';
wwv_flow_api.g_varchar2_table(9) := '6563742D6368616E6765642D6974656D732E6A732E6D6170';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(23925341214676054)
,p_plugin_id=>wwv_flow_api.id(23923801858657884)
,p_file_name=>'js/apex-detect-changed-items.min.js'
,p_mime_type=>'application/javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '7B2276657273696F6E223A332C22736F7572636573223A5B22617065782D6465746563742D6368616E6765642D6974656D732E6A73225D2C226E616D6573223A5B22627574746F6E446F4E6F745761726E222C227761726E4F6E4974656D4C6576656C22';
wwv_flow_api.g_varchar2_table(2) := '2C226572726F7273222C22616C6C4974656D73222C2261706578222C2270616765222C22666F7245616368506167654974656D222C2224222C22656C222C226E616D65222C226974656D222C2269734368616E676564222C22656C656D656E74222C2263';
wwv_flow_api.g_varchar2_table(3) := '6C6173734C697374222C2276616C7565222C22696E636C75646573222C2270757368222C226D657373616765222C226C6F636174696F6E222C22706167654974656D222C22636C6561724572726F7273222C2273686F774572726F7273222C22636F6E66';
wwv_flow_api.g_varchar2_table(4) := '69726D45786974222C227061676552657175657374222C222476222C2277696E646F77222C226A5175657279222C22646F63756D656E74222C227265616479222C2265616368222C2274686973222C226964222C22636C69636B225D2C226D617070696E';
wwv_flow_api.g_varchar2_table(5) := '6773223A22414163412C49414149412C694241416B422C45414574422C53414153432C6B424143502C49414149432C454141532C47414562432C53414157432C4B41414B432C4B41414B432C674241437242482C53414345492C454141452C6942414346';
wwv_flow_api.g_varchar2_table(6) := '2C53414155432C45414149432C474145564C2C4B41414B4D2C4B41414B442C4741414D452C63414366502C4B41414B4D2C4B41414B442C4741414D472C514141512C47414147432C55414155432C4D41414D432C534141532C6F4241457244622C454141';
wwv_flow_api.g_varchar2_table(7) := '4F632C4B41414B2C43414356432C514141532C6743414354432C534141552C53414356432C53414155562C4F414968422C474147464C2C4B41414B612C51414151472C6341436268422C4B41414B612C51414151492C574141576E422C47414731422C53';
wwv_flow_api.g_varchar2_table(8) := '4141536F422C634143502C49414149432C454141632C55414159432C474141472C5941436A432C4741414970422C4B41414B432C4B41414B4D2C61414138422C57414166592C494141364276422C6742414978442C4F414841432C6B4241434173422C45';
wwv_flow_api.g_varchar2_table(9) := '4141632C4B414364452C4F41414F7A422C694241416B422C4541436C422C4741455075422C454141632C4B414364452C4F41414F7A422C694241416B422C4541493742492C4B41414B73422C4F41414F432C55414155432C4F41414D2C5741457A427242';
wwv_flow_api.g_varchar2_table(10) := '2C454141452C69424141694273422C4D41414B2C5741436842432C4B41414B6A422C55414155432C4D41414D432C534141532C6F4241433942522C454141452C4941414975422C4B41414B432C49414149432C4F41414D2C57414359502C4F41414F7A42';
wwv_flow_api.g_varchar2_table(11) := '2C694241416B42222C2266696C65223A22617065782D6465746563742D6368616E6765642D6974656D732E6A73227D';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(23925759265676055)
,p_plugin_id=>wwv_flow_api.id(23923801858657884)
,p_file_name=>'js/apex-detect-changed-items.js.map'
,p_mime_type=>'application/json'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
prompt --application/end_environment
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false));
commit;
end;
/
set verify on feedback on define on
prompt  ...done
